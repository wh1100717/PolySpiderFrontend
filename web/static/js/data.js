// Generated by CoffeeScript 1.7.1
this.modal_select = function(app_id) {
  return $.ajax({
    "type": "get",
    "contentType": "application/json",
    "url": "/api/app/get_app_by_app_id?app_id=" + app_id,
    "success": function(data) {
      var data_detail, input_data;
      data = eval("(" + data + ")");
      data_detail = data['app_detail'];
      console.log(data_detail);
      input_data = "";
      $.each(data_detail, function(index, detail) {
        var body, head, imgs, imgs_url;
        head = "<h1><b>" + detail['platform'] + " | " + detail['version'] + "</b></h1>";
        body = "";
        body += "<div style='float: right;'><img src='" + detail['cover'] + "' /></div>";
        body += "<div><ul>";
        if (detail['apk_size']) {
          body += "<li><b>文件大小：</b>" + detail['apk_size'] + "</li>";
        }
        if (detail['rating_point']) {
          body += "<li><b>评分：</b>" + detail['rating_point'] + "分</li>";
        }
        if (detail['rating_count']) {
          body += "<li><b>评论数：</b>" + detail['rating_count'] + "</li>";
        }
        if (detail['android_version']) {
          body += "<li><b>支持Android版本：</b>" + detail['android_version'] + "</li>";
        }
        if (detail['download_times']) {
          body += "<li><b>下载量：</b>" + detail['download_times'] + "</li>";
        }
        if (detail['last_update']) {
          body += "<li><b>最后更新日期：</b>" + detail['last_update'] + "</li>";
        }
        if (detail['apk_url']) {
          body += "<li><b><a href='" + detail['apk_url'] + "'>Apk下载</a></b></li>";
        }
        body += "</ul></div>";
        body += "<p>" + detail['description'] + "</p>";
        imgs_url = detail['imgs_url'].split(" ");
        imgs = "";
        $.each(imgs_url, function(index, img_url) {
          return imgs += "<img src='" + img_url + "' />";
        });
        body += imgs;
        if (index === 0) {
          return input_data += "<div style='padding-bottom: 30px;'>" + head + body + "</div>";
        } else {
          return input_data += "<div style='border-top: 1px solid #e5e5e5; padding-bottom: 30px;'>" + head + body + "</div>";
        }
      });
      $('#modal_app_name').html(data['app_name']);
      return $("#modal_app_body").html(input_data);
    }
  });
};
